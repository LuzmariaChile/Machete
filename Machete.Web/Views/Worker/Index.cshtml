@model IEnumerable<Machete.Domain.Worker>
@using Machete.Web.Helpers
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.dataTables-1.7.6.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/dataTables/demo_table.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/dataTables/demo_table_jui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" media="all" />
<link href="@Url.Content("~/Content/themes/smoothness/jquery-ui-1.7.2.custom.css")"rel="stylesheet" type="text/css" media="all" />
@{
    ViewBag.Title = Machete.Web.Resources.Workers.indextitle;
}
<h2>@Machete.Web.Resources.Workers.indextitle</h2>
<p>
    @Html.ActionLink(@Machete.Web.Resources.Workers.createlink, "Create", null, new { id = "createlink" })
</p>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>@Machete.Web.Resources.Workers.filterlegend</legend>
        @Html.Label(@Machete.Web.Resources.Workers.filterinactive)
        @Html.CheckBox("show_inactive", (bool)ViewBag.show_inactive)
        <input type="submit" value="@Machete.Web.Resources.Workers.filtersubmit" />
    </fieldset>
}
<table id="myDataTable" class="display">
    <thead>
        <tr>
            <th>
            </th>
            <th>
                @Machete.Domain.Resources.Worker.dwccardnum
            </th>
            <th>
                @Machete.Domain.Resources.Worker.active
            </th>
            <th>
                @Machete.Domain.Resources.Persons.firstname1
            </th>
            <th>
                @Machete.Domain.Resources.Persons.firstname2
            </th>
            <th>
                @Machete.Domain.Resources.Persons.lastname1
            </th>
            <th>
                @Machete.Domain.Resources.Persons.lastname2
            </th>
            <th>
                @Machete.Domain.Resources.Worker.memberexpirationdate
            </th>
        </tr>
    </thead>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @if (Html.IsInRole(Html.Role_AMPU()))
                {
                    @Html.ActionLink(@Machete.Web.Resources.Workers.viewlink, "View", new { id = item.ID })
                }
                @if (Html.IsInRole(Html.Role_AMP()))
                {
                    @Html.Encode(" | ")
                    @Html.ActionLink(@Machete.Web.Resources.Workers.editlink, "Edit", new { id = item.ID })
                }
                @if (Html.IsInRole(Html.Role_A()))
                {
                    @Html.Encode(" | ")
                    @Html.ActionLink(@Machete.Web.Resources.Workers.deletelink, "Delete", new { id = item.ID })
                }            </td>
            <td>
                @item.dwccardnum
            </td>
            <td>
                @item.active
            </td>
            <td>
                @item.Person.firstname1
            </td>
            <td>
                @item.Person.firstname2
            </td>
            <td>
                @item.Person.lastname1
            </td>
            <td>
                @item.Person.lastname2
            </td>
            <td>
                @String.Format("{0:g}", item.memberexpirationdate)
            </td>
        </tr>
    }
</table>
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('#myDataTable').dataTable({
            "bPaginate": true,
            "bLengthChange": true,
            "bFilter": true,
            "bSort": true,
            "bInfo": true,
            "bAutoWidth": false
        });
    });  
</script>
