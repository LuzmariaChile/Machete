@model Machete.Web.ViewModel.WorkerSigninViewModel
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/jquery-ui-1.8.6.custom.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery.dataTables-1.7.6.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.jeditable.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.dataTables.editable.js")" type="text/javascript"></script>
<link href="@Url.Content("~/Content/dataTables/demo_table.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/dataTables/demo_table_jui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" type="text/css" media="all" />
<link href="@Url.Content("~/Content/themes/smoothness/jquery-ui-1.7.2.custom.css")"rel="stylesheet" type="text/css" media="all" />

@{
    ViewBag.Title = "Worker Signin?!";
}
<h2>
    Worker Signin?!</h2>
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            @using (Html.BeginForm())
            {
                @Html.ValidationSummary(true)
                <div class="editor-label">
                    @Html.LabelFor(model => model.dwccardentry)
                </div>
                <div class="editor-field">
                    @Html.TextBox("dwccardentry", "")
                    @Html.ValidationMessageFor(model => model.dwccardentry)
                    @Html.TextBox("dateforsignin",
                        Html.Encode(String.Format("{0:mm/dd/yy}", Model.dateforsignin.ToShortDateString())),
                        new { @class = "ui-datepicker" })
                    @Html.ValidationMessageFor(model => model.dateforsignin)
                </div>
                <p>
                    <input type="submit" value="Signin?!" />
                </p>   
            }
            <table id="myDataTable" class="display">
                <thead>
                <tr>
                    <th>
                    </th>
                    <th>
                        dwccardnum
                    </th>
                    <th>
                        firstname1
                    </th>
                    <th>
                        firstname2
                    </th>
                    <th>
                        lastname1
                    </th>
                    <th>
                        lastname2
                    </th>
                    <th>
                        datesignin
                    </th>
                </tr>
                </thead>
                @foreach (var item in Model.workersignins)
                {
                    <tr>
                        <td>
                            @Html.ActionLink("Delete", "Delete", new { id = item.signin.ID })
                        </td>
                        <td>
                            @item.signin.dwccardnum
                        </td>
                        <td>
                            @item.person.firstname1
                        </td>
                        <td>
                            @item.person.firstname2
                        </td>
                        <td>
                            @item.person.lastname1
                        </td>
                        <td>
                            @item.person.lastname2
                        </td>
                        <td>
                            @String.Format("{0:MM/dd/yyyy}", item.signin.dateforsignin)
                        </td>
                    </tr>
                }
            </table>
        </td>
        <td>
            @if (Model.last_chkin_image.ImageData == null)
            {
                <p>
                    @Html.Label("No image")
                </p>
            }
            else
            {
                <img src="@Url.Action("GetImage", "Image", new { Model.last_chkin_image.ID })" alt="" />
            }
        </td>
    </tr>
</table>
<script type="text/javascript">
    $().ready(function () {
        DatePicker();
        SigninFocus();
        MyTable();
    });
    function DatePicker() {
        $('.ui-datepicker').datepicker({
            dateFormat: 'mm/dd/yy',
            buttonImage: '@Url.Content("~/Content/calendar.gif")',
            buttonImageOnly: true,
            showOn: "button",
            onClose: function () { SigninFocus(); }
        });
    }
    function SigninFocus() {
        $('#dwccardentry').focus();
    }
    function MyTable() {
        $('#myDataTable').dataTable({
            "bPaginate": true,
            "bLengthChange": true,
            "bFilter": true,
            "bSort": true,
            "bInfo": true,
            "bAutoWidth": false
        });
    }
</script>
