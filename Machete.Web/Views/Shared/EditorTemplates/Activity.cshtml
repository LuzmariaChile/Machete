@model Machete.Domain.Activity
@using Machete.Web.Helpers
@using Machete.Web.Resources

@{
    System.Globalization.CultureInfo CI = (System.Globalization.CultureInfo)Session["Culture"];
    string recType = "activity";
    string idPrefix = recType + Model.ID + "-";
}
@Html.HiddenFor(model => model.ID, new { @class="hiddenRecID", id=idPrefix + "ID"})
<div class="tb-table" style="float: left;">
    <div class="tb-row">
        @Html.mUITableLabelFor(model => model.name)
        @Html.mUIDropDownListFor(model => model.name, 
                new SelectList(Lookups.activityName.get(CI.TwoLetterISOLanguageName),
                                            "Value", "Text", Model.name),
                new { tabindex = "1", id = idPrefix + "name" })
     </div>
     <div class="tb-row">
        @Html.mUITableLabelFor(model => model.type)
        @Html.mUIDropDownListFor(model => model.type, 
                new SelectList(Lookups.activityType.get(CI.TwoLetterISOLanguageName),
                                                    "Value", "Text", Model.type),
                new { tabindex = "1", id = idPrefix + "type" })
     </div>
    <div class="tb-row">
        @Html.mUITableLabelFor(model => model.dateStart)
        <div class="tb-field">
            @Html.TextBox("dateStart", Html.Encode(System.String.Format("{0:g}",
                                                                        Model.dateStart)),
                                                     new { @id = idPrefix + "dateStart" })
            @Html.ValidationMessageFor(model => model.dateStart)
        </div>
    </div>
    <div class="tb-row">
        @Html.mUITableLabelFor(model => model.dateEnd)
        <div class="tb-field">
            @Html.TextBox("dateEnd", Html.Encode(System.String.Format("{0:g}",
                                                                                 Model.dateEnd)),
                                                     new { @id = idPrefix + "dateEnd" })
            @Html.ValidationMessageFor(model => model.dateEnd)
        </div>
    </div>
    <div class="tb-row">
        @Html.mUITableLabelFor(model => model.teacher)
        <div class="tb-field">
            @Html.DropDownListFor(model => model.teacher, 
                    new SelectList(Lookups.getTeachers(), Model.teacher),
                    @Machete.Web.Resources.Shared.choose,
                    new { tabindex = "1", id = idPrefix + "teacher" })
        </div>
@*        <div class="tb-label">
        </div>
        <div class="tb-field">
        </div>*@
    </div>
</div>
<div class="tb-table" style="float: left;">
    <div class="tb-row">
        @Html.mUITableDescLabelFor(model => model.notes)
        <div class="tb-field desc-field">
            @Html.TextAreaFor(model => model.notes, new { tabindex = "3", @class="desc-field" , id = idPrefix + "notes"})
            @Html.ValidationMessageFor(model => model.notes)
        </div>
    </div>
</div>
<div style="clear: left;"></div>
@Html.Partial("ManagerInfo", Model)
@Html.Partial("AdministratorInfo", Model)


<script type="text/javascript">
    $(document).ready(function () {
        $("#@(idPrefix)dateStart").datetimepicker({
            stepMinute: 15,
            ampm: true,
            hourMin: 7,
            hourMax: 18,
            minuteMin: 0,
            minuteMax: 45,
            minuteGrid: 15,
            hourGrid: 4
        });
        $("#@(idPrefix)dateEnd").datetimepicker({
            stepMinute: 15,
            ampm: true,
            hourMin: 7,
            hourMax: 18,
            minuteMin: 0,
            minuteMax: 45,
            minuteGrid: 15,
            hourGrid: 4
        });
    });
</script>